# ENTRY_V9_SNIPER Policy Configuration (EU/London/NY)
#
# SNIPER entry policy for EU/OVERLAP/US sessions with HIGH volatility allowed.
# Higher frequency than FARM (more sessions, HIGH vol allowed).
# Reuses 100% of FARM_V2B infrastructure (model, features, meta-model).

entry_v9_policy_sniper:
  enabled: true
  min_prob_long: 0.67  # Start conservative (0.66-0.68 range), slightly lower than FARM (0.68)
  min_prob_profitable: 0.0
  enable_profitable_filter: false
  require_trend_up: false  # v1: soft gate only (log but don't hard-require)
  
  allow_low_vol: true
  allow_medium_vol: true
  allow_high_vol: true    # KEY DIFFERENCE: HIGH vol allowed (FARM only allows LOW/MEDIUM)
  allow_extreme_vol: false
  
  allow_short: false  # Long-only (same as FARM)

entry_models:
  v9:
    enabled: true
    model_dir: gx1/models/entry_v9/nextgen_2020_2025_clean  # Same as FARM

meta_model:
  enabled: true
  model_path: gx1/models/farm_entry_meta/baseline_model.pkl  # Same as FARM
  feature_cols_path: gx1/models/farm_entry_meta/feature_cols.json

allowed_sessions: ["EU", "OVERLAP", "US"]  # KEY DIFFERENCE: Not ASIA
allowed_vol_regimes: ["LOW", "MEDIUM", "HIGH"]  # KEY DIFFERENCE: HIGH allowed
allowed_trend_regimes: []  # Trend checked via require_trend_up (soft gate only in v1)

guard:
  enabled: true

entry_gating:
  p_side_min:
    long: 0.67  # Slightly lower threshold for higher frequency
    short: 1.0  # Blocks shorts
  margin_min:
    long: 0.50
    short: 0.50
  side_ratio_min: 1.25
  sticky_bars: 1
  
  # Stage-0 configuration (SNIPER-specific, more permissive than FARM)
  stage0:
    enabled: true
    allowed_sessions: ["EU", "OVERLAP", "US"]  # SNIPER sessions (not ASIA)
    allowed_vol_regimes: ["LOW", "MEDIUM", "HIGH"]  # SNIPER allows HIGH vol
    # Block specific trend+vol combinations (empty = allow all)
    block_trend_vol_combos: []
    # Example of blocking a combo (commented out):
    # - trend: "TREND_UP"
    #   vol: "EXTREME"

