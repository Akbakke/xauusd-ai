# ⚠️ EXPERIMENTAL / NOT USED IN PRODUCTION ⚠️
# This config is archived for experimental purposes only.
# Production pipelines use long-only strategies (GX1_V11_OANDA_DEMO_V9_FARM_V2B_EXIT_A_PROD.yaml).
# ⚠️ EXPERIMENTAL / NOT USED IN PRODUCTION ⚠️
# This config is archived for experimental purposes only.
# Production pipelines use long-only strategies (GX1_V11_OANDA_DEMO_V9_FARM_V2B_EXIT_A_PROD.yaml).
# ENTRY_V9_FARM_V2B Short-Sniper variant (experimental)
#
# GOALS
# - Reuse ENTRY_V9 + FARM_V2B stack but keep ASIA-only / LOW-MED regimes.
# - Allow short consideration by lowering min_prob_long and setting allow_short=true.
# - Block long fills via entry_gating thresholds (long p_side_min set above 1.0).
# - Require strong short conviction via entry_gating.p_side_min.short ~= 0.75.
#
# NOTE: ENTRY_V9 policy code currently filters on p_long only. Setting
# min_prob_long to a very low value allows short-heavy bars to reach the
# gating layer, but full short support still requires code changes outlined
# in docs/EXIT_A_SHORT_NOTES.md.

entry_v9_policy_farm_v2b:
  enabled: true
  min_prob_long: 0.05          # keep almost all bars so short probability can dominate
  min_prob_profitable: 0.0
  enable_profitable_filter: false
  require_trend_up: false

  allow_low_vol: true
  allow_medium_vol: true
  allow_high_vol: false
  allow_extreme_vol: false

  allow_short: true            # currently a no-op in code but documented for future use

entry_models:
  v9:
    enabled: true
    model_dir: gx1/models/entry_v9/nextgen_2020_2025_clean

meta_model:
  enabled: true
  model_path: gx1/models/farm_entry_meta/baseline_model.pkl
  feature_cols_path: gx1/models/farm_entry_meta/feature_cols.json

allowed_sessions: ["ASIA"]
allowed_vol_regimes: ["LOW", "MEDIUM"]
allowed_trend_regimes: []

guard:
  enabled: true

entry_gating:
  p_side_min:
    long: 1.10       # impossible → blocks long fills
    short: 0.75      # high confidence shorts only
  margin_min:
    long: 0.50
    short: 0.12
  side_ratio_min: 1.25
  sticky_bars: 1
