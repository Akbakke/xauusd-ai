# Oanda Practice API Configuration
# Copy this file to .env and fill in your credentials
# .env is gitignored and will NOT be committed
#
# IMPORTANT: In PROD_BASELINE mode, all credentials must be set or trading will be disabled.

# OANDA Environment: "practice" or "live"
# - practice: OANDA Practice (Demo) environment
# - live: OANDA Live (Real money) environment
OANDA_ENV=practice

# OANDA API Token (required, preferred)
# Get from: https://www.oanda.com/account/tpa/personal_token
# For Practice: https://www.oanda.com/account/tpa/personal_token (Practice account)
# For Live: https://www.oanda.com/account/tpa/personal_token (Live account)
OANDA_API_TOKEN=your_api_token_here_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# OANDA Account ID (required)
# Format: XXX-XXX-XXXXX-XXX
# For Practice: Get from Practice account dashboard
# For Live: Get from Live account dashboard
OANDA_ACCOUNT_ID=101-004-xxxxx-001

# Legacy variable (for backward compatibility, but OANDA_API_TOKEN is preferred)
# OANDA_API_KEY=your_api_key_here_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Live Trading Safety Latch (required when OANDA_ENV=live and meta.role=PROD_BASELINE)
# Set to "YES" to enable live trading (must be explicitly set)
# I_UNDERSTAND_LIVE_TRADING=YES

# Legacy variable (not used anymore, API URL is determined from OANDA_ENV)
# OANDA_HOST=https://api-fxpractice.oanda.com/v3

# Optional: System configuration (defaults shown, uncomment to override)
# SHADOW_REGIME=1              # 1=ON (filter SHORT in bull), 0=OFF
# SESSION_WINDOW=exclude_asia  # exclude_asia|overlap|london|london_plus|none

# Trendiness filter (shadow A/B testing, NOT in prod yet - under evaluation)
# TRENDINESS_MIN_Q=2           # Drop Q1 (lowest 25% trendiness bars), 1=no filter
# TRENDINESS_METRIC=atrN       # atrN (ATR-smoothed) or tr1 (raw TR ratio)
# TRENDINESS_WIN=14            # Rolling window for atrN metric

# Shadow C - Piecewise policy + throttles (shadow validation, NOT in prod yet)
# SHADOW_PIECEWISE=1                                                      # 1=ON, 0=OFF
# PIECEWISE_POLICY=gx1/wf_runs/LIVE_SHADOW/strat_covopt_strict/strat_policy.json
# THROTTLE_MAX_TRADES_PER_DAY=80  # Max trades per UTC day (recommended: 80 for C1)
# THROTTLE_MIN_SPACING_MIN=5      # Min minutes between same-side trades
# THROTTLE_TOPK_PER_HOUR=4        # Recommended: 4 (keep top 4 per hour by prob_gap)
# THROTTLE_SCORE=prob_gap         # prob_gap or pmax

# Meta-labeling - Abstain filter (shadow validation, NOT in prod yet)
# META_ENABLE=0                   # 1=ON (recommended with C1), 0=OFF
# META_MODE=inline                # inline, wf, or load
# META_INLINE_DAYS=60             # Training window for inline mode
# META_THRESHOLD=0.45             # Profitability probability threshold
# META_MIN_SAMPLES=500            # Min samples per class to fit

# Instructions:
# 1. Create a free practice account at https://www.oanda.com/
# 2. Generate an API key from your practice account dashboard
# 3. Copy this file: cp env.example .env
# 4. Edit .env and replace the values above with your actual credentials
# 5. Test: curl -H "Authorization: Bearer $OANDA_API_KEY" "$OANDA_HOST/accounts/$OANDA_ACCOUNT_ID"

